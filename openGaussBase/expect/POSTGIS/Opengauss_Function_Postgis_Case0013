-- @testpoint: PostGIS功能覆盖，获取对象中心点ST_Centroid
--step1:创建表   expect:成功
drop table if exists t_postgis_0012;
SQL SUCCESS
create table t_postgis_0012 (
    smid integer not null,
    smgeometry1 geometry(point),
    smgeometry2 geometry(multilinestring,4490),
    smgeometry3 geometry(multipolygon,4490));
SQL SUCCESS
--step2:插入数据(点，线，面)   expect:成功
insert into t_postgis_0012 values(99001,
ST_GeomFromText('Point(0 0)'),
ST_GeomFromText('MultiLineString((0 0,1 1,1 2),(2 3,3 2,5 4))',4490),
ST_GeomFromText('MultiPolygon(((1 0, 0 1, 1 2, 2 1, 1 0), (2 0, 1 1, 2 2, 3 1, 2 0)))',4490));
SQL SUCCESS
insert into t_postgis_0012 values(99002,
ST_GeomFromText('Point(1 2)'),
ST_GeomFromText('MultiLineString((0 0,1 1,1 2),(1 1,2 0,3 1))',4490),
ST_GeomFromText('MULTIPOLYGON(((0 0,4 0,4 4,0 4,0 0),(1 1,2 1,2 2,1 2,1 1)), ((-1 -1,-1 -2,-2 -2,-2 -1,-1 -1)))',4490));
SQL SUCCESS
insert into t_postgis_0012 values(99002,
ST_GeomFromText('Point(3 4)'),
ST_GeomFromText('MultiLineString((0 0,1 1,1 2),(1 2,2 1,3 1))',4490),
ST_GeomFromText('MULTIPOLYGON (((2 0, 3 1, 2 2, 1.5 1.5, 2 1, 1.5 0.5, 2 0)), ((1 0, 1.5 0.5, 1 1, 1.5 1.5, 1 2, 0 1, 1 0)))',4490));
SQL SUCCESS
--step3:查看数据   expect:成功
--获取点的中心点
select smgeometry1 from t_postgis_0012;
+--------------------------------------------+
| smgeometry1                                |
+--------------------------------------------+
+--------------------------------------------+
select st_asewkt(st_centroid(smgeometry1)) from t_postgis_0012;
+------------+
| st_asewkt  |
+------------+
| POINT(0 0) |
| POINT(1 2) |
| POINT(3 4) |
+------------+
--获取线的中心点
select smgeometry2 from t_postgis_0012;
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| smgeometry2                                                                                                                                                                                                                                                    |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
select st_asewkt(st_centroid(smgeometry2)) from t_postgis_0012;
+-----------------------------------------------------+
| st_asewkt                                           |
+-----------------------------------------------------+
| SRID=4490;POINT(2.48711306656091 2.13733417138325)  |
| SRID=4490;POINT(1.40462821508473 0.690743569830546) |
| SRID=4490;POINT(1.31066017177982 1.10355339059327)  |
+-----------------------------------------------------+
--获取面的中心点
select smgeometry3 from t_postgis_0012;
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| smgeometry3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
select st_asewkt(st_centroid(smgeometry3)) from t_postgis_0012;
+--------------------------------+
| st_asewkt                      |
+--------------------------------+
| SRID=4490;POINT(1.5 1)         |
| SRID=4490;POINT(1.8125 1.8125) |
| SRID=4490;POINT(1.5 1)         |
+--------------------------------+
--step4:清理环境   expect:成功
drop table t_postgis_0012 cascade;
SQL SUCCESS
